<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8" />

  
  <title>Notes</title>

  
  
  <link href="//cdn.jsdelivr.net" rel="dns-prefetch">
  <link href="//cdnjs.cloudflare.com" rel="dns-prefetch">
  
  <link href="//at.alicdn.com" rel="dns-prefetch">
  
  <link href="//fonts.googleapis.com" rel="dns-prefetch">
  <link href="//fonts.gstatic.com" rel="dns-prefetch">
  <link href="///disqus.com" rel="dns-prefetch">
  <link href="//c.disquscdn.com" rel="dns-prefetch">
  
  
  

  

  
  <meta name="author" content="Chang Liu">
  <meta name="description" content="Hugo is one of the most popular open-source static site generators. With its amazing speed and flexibility, Hugo makes building websites fun again.">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@gohugoio">
  <meta name="twitter:title" content="Notes">
  <meta name="twitter:description" content="Hugo is one of the most popular open-source static site generators. With its amazing speed and flexibility, Hugo makes building websites fun again.">
  <meta name="twitter:image" content="/images/avatar.png">

  
  <meta property="og:type" content="website">
  <meta property="og:title" content="Notes">
  <meta property="og:description" content="Hugo is one of the most popular open-source static site generators. With its amazing speed and flexibility, Hugo makes building websites fun again.">
  <meta property="og:url" content="https://liuchang0812.github.io/">
  <meta property="og:image" content="/images/avatar.png">




<meta name="generator" content="Hugo 0.68.3">


<link rel="canonical" href="https://liuchang0812.github.io/">
<link rel="alternate" type="application/rss+xml" href="https://liuchang0812.github.io/index.xml" title="Notes">

<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no,email=no,adress=no">
<meta http-equiv="Cache-Control" content="no-transform">


<meta name="robots" content="index,follow">
<meta name="referrer" content="origin-when-cross-origin">
<meta name="google-site-verification" content="_moDmnnBNVLBN1rzNxyGUGdPHE20YgbmrtzLIbxaWFc">
<meta name="msvalidate.01" content="22596E34341DD1D17D6022C44647E587">





<meta name="theme-color" content="#02b875">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Notes">
<meta name="msapplication-tooltip" content="Notes">
<meta name='msapplication-navbutton-color' content="#02b875">
<meta name="msapplication-TileColor" content="#02b875">
<meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
<link rel="icon" href="https://liuchang0812.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://liuchang0812.github.io/icons/icon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://liuchang0812.github.io/icons/icon-32x32.png">
<link rel="icon" sizes="192x192" href="https://liuchang0812.github.io/icons/icon-192x192.png">
<link rel="apple-touch-icon" href="https://liuchang0812.github.io/icons/icon-152x152.png">
<link rel="manifest" href="https://liuchang0812.github.io/manifest.json">


<link rel="preload" href="https://liuchang0812.github.io/styles/main-rendered.min.css" as="style">


<link rel="preload" href="https://fonts.googleapis.com/css?family=Lobster" as="style">
<link rel="preload" href="https://liuchang0812.github.io/images/avatar.png" as="image">
<link rel="preload" href="https://liuchang0812.github.io/images/grey-prism.svg" as="image">


<style>
  body {
    background: rgb(244, 243, 241) url('/images/grey-prism.svg') repeat fixed;
  }
</style>
<link rel="stylesheet" href="https://liuchang0812.github.io/styles/main-rendered.min.css">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster">








  
  
<!--[if lte IE 8]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-ie8@1.1.2/dist/videojs-ie8.min.js"></script>
<![endif]-->

<!--[if lte IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20180112/classList.min.js"></script>
<![endif]-->


</head>
  <body>
    <div class="suspension">
      <a role="button" aria-label="Go to top" title="Go to top" class="to-top is-hide"><span class="icon icon-up" aria-hidden="true"></span></a>
      
    </div>
    
     <header class="site-header">
  <a href="https://liuchang0812.github.io"><img class="avatar" src="https://liuchang0812.github.io/images/avatar.png" alt="Avatar"></a>
  
  <h1 class="title"><a href="https://liuchang0812.github.io">Notes</a></h1>
  
  <p class="subtitle">~ Keep It Simple &amp; Stupid ~</p>
  <button class="menu-toggle" type="button" aria-label="Main Menu" aria-expanded="false" tab-index="0">
    <span class="icon icon-menu" aria-hidden="true"></span>
  </button>

  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item
           is-active
          
          ">
          <a href="https://liuchang0812.github.io/">Home</a>
        </li>
      
        <li class="menu-item
          
          
          ">
          <a href="https://github.com/liuchang0812">Works</a>
        </li>
      
        <li class="menu-item
          
          
          ">
          <a href="https://liuchang0812.github.io/tags/">Tags</a>
        </li>
      
        <li class="menu-item
          
          
          ">
          <a href="https://liuchang0812.github.io/about/">About</a>
        </li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list"></ul>
  </nav>
</header>

<section class="main post-list">
  <header class="list-header offscreen">
    <h2 class="list-label">All Posts</h2>
  </header>
  
  
   <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://liuchang0812.github.io/post/use-docker-as-dev-env/" class="post-link">使用docker作为开发环境</a></h3>
    <p class="post-meta">@Chang Liu · Jul 6, 2020 · 1 min read</p>
  </header>
  
    <img class="post-cover" src="https://pic3.zhimg.com/80/v2-714d489867d85c7949ffebd891693c0e_720w.jpg" alt="使用docker作为开发环境" lazyload="on">
  
  <p class="post-summary">纪录自己使用容器作为开发环境的常用命令。
</p>
  <footer class="post-footer">
    <a class="read-more" href="https://liuchang0812.github.io/post/use-docker-as-dev-env/">Read More →</a>
  </footer>
</article>
  <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://liuchang0812.github.io/post/readdirplus-in-fuse/" class="post-link">FUSE 中的 readdirplus 优化</a></h3>
    <p class="post-meta">@Chang Liu · Jun 23, 2020 · 2 min read</p>
  </header>
  
  <p class="post-summary">使用 FUSE 将一个存储系统映射到本地文件系统时，都会遇到一个问题：默认的 ls 操作耗时特别长，用户体验特别糟糕。这里介绍我们优化 FUSE 中目录遍历的方法：通过支持 readdirplus 调用来上百倍的提升 ls 命令耗时。
</p>
  <footer class="post-footer">
    <a class="read-more" href="https://liuchang0812.github.io/post/readdirplus-in-fuse/">Read More →</a>
  </footer>
</article>
  <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://liuchang0812.github.io/post/recent-works-on-ceph-kstore/" class="post-link">最近在 Ceph KStore 上的一些工作（2020-01-13）</a></h3>
    <p class="post-meta">@Chang Liu · Jan 13, 2020 · 1 min read</p>
  </header>
  
  <p class="post-summary">背景 分享我们最近在 ceph kstore 上的一些工作。
</p>
  <footer class="post-footer">
    <a class="read-more" href="https://liuchang0812.github.io/post/recent-works-on-ceph-kstore/">Read More →</a>
  </footer>
</article>
  <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://liuchang0812.github.io/post/etcd-client-election/" class="post-link">Etcd SDK 中的选主实现</a></h3>
    <p class="post-meta">@Chang Liu · Nov 18, 2019 · 1 min read</p>
  </header>
  
  <p class="post-summary">一句话总结就是：每个会话在指定目录下创建一个键值对，谁先创建成功谁就是主。
</p>
  <footer class="post-footer">
    <a class="read-more" href="https://liuchang0812.github.io/post/etcd-client-election/">Read More →</a>
  </footer>
</article>
  <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://liuchang0812.github.io/post/raft-paper-notes/" class="post-link">Raft Paper Notes</a></h3>
    <p class="post-meta">@Chang Liu · Oct 28, 2019 · 2 min read</p>
  </header>
  
  <p class="post-summary">为什么要发明 RAFT 一致性协议？ 因为 paxos 过于复杂，难以理解。同时，paxos 是面向学术和理论证明，没有在论文中介绍工程上的实现。如果要实现一个工业级的 paxos，要做很多优化拓展，例如 multi-paxos。为了解决这些问题， raft 是一个把可理解性、明确工程实现方法放在首要考虑地位的算法。
RAFT 算法细节 raft 算法主要分为两个部分: 1)Leader Election; 2)Log Replication。
基本概念  term, 每次 leader 变更时就增长1。每个 term 内只会有一个 leader。时间的逻辑划分，用于 leader election。 RPC，不同结点之间通过 RPC 来通信，在 raft 中有两个 RPC: 1)RequestVote;2)AppendEntries。  Leader Election 空的 AppendEntries RPC 被用来作为心跳包，由 Leader 发送给其它 Server，同时维持其的Leader角色（Leader Authority）。当一个 Server 在超过一定时间(election timeout)没有收来自Leader的心跳包，就认为 Leader 不存在，开始新一轮的选举。
选举的策略比较简单，每个 Server 在每个 Term 只给一个人投票，遵循先到先得的策略。为了尽量避免出现 split 投不出大多数的情况，每个 Server 都有一个随机的election timeout配置，来避免多个 Server 在同时发出 RequestVote 请求。
Log Replication committed log: 保证持久化的日志，不会因为机器故障等各类原因丢失该日志。并且该日志最终会被所有可用机器执行。</p>
  <footer class="post-footer">
    <a class="read-more" href="https://liuchang0812.github.io/post/raft-paper-notes/">Read More →</a>
  </footer>
</article>
  <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="https://liuchang0812.github.io/post/install-seastar/" class="post-link">Build and Link with SeaStar library</a></h3>
    <p class="post-meta">@Chang Liu · Sep 26, 2019 · 1 min read</p>
  </header>
  
  <p class="post-summary">Build Seastar git clone https://github.com/scylladb/seastar.git cd seastar git submodule update --init --recursive apt udpate &amp;&amp; ./install-dependencies.sh ./configure.py --mode=release --cook fmt Link with Seastar apt install libunistring-dev export seastar_dir=`pwd` g&#43;&#43; my_app.cc $(pkg-config --libs --cflags --static $seastar_dir/build/release/seastar.pc) -o my_app ./my_app </p>
  <footer class="post-footer">
    <a class="read-more" href="https://liuchang0812.github.io/post/install-seastar/">Read More →</a>
  </footer>
</article>
 
   
</section>

<footer class="site-footer">
  <p>© 2017-2020 Notes</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank" rel="noopener">Nuo</a>.</p>
  
</footer>


<script src="https://cdn.jsdelivr.net/npm/smooth-scroll@15.0.0/dist/smooth-scroll.min.js"></script>








<script src="https://liuchang0812.github.io/scripts/index.min.js"></script>

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('\/service-worker.js').then(function() {
      console.log('[ServiceWorker] Registered');
    });
  }
</script>






 
  </body>
</html>
